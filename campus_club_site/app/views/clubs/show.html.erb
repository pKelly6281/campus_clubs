<% provide(:title, @club.name) %>

<div class="row">
	<h1><%= @club.name %></h1>
</div>
<!-- User Club ToolBar -->
	<% if logged_in? %>				
			<%= link_to "Edit Club", edit_club_path(@club.id), class: "btn btn-primary btn-sm"%>
			<%= link_to "Add Executive Member ", addExec_path(@club.id), class: "btn btn-primary btn-sm"%>
	<% end %>	

	<% if logged_in? %>
		<div class="col-sm-2 text-right" id="favorite">
			<button id='favorite' class = "btn btn-default">
				<span  id= 'favorite-span'class="glyphicon glyphicon-star-empty" aria-hidden="true">Favorite</span>
			</button>
		</div>
	<% end %>	



<!-- Club Information -->






<div class="row col-md-offset-3">
	<div class="col-sm-3">
		<table class="table table-condensed">
			<tr>
				<th>Meeting Time and Location</th>
			</tr>
			<tr>
				<td><%=@club.meetTime %> @ <%=@club.meetLoc %></td>
			</tr>
		</table>

	</div>

	<div class="col-sm-6">
		<table class="table condensed">
			<tr>
				<th>Description</th>
			</tr>
			<tr>
				<td><%= @club.desc %></td>
			</tr>
		</table>

	</div>

	
</div>
<script type="text/javascript">
	var favorite=false;
	$(document).ready(function(){
		isFavorite()
	});
	$("#favorite").click(function(){
		toggleFavorite();
	});
	function toggleFavorite(){
		var base_url = "http://localhost:3000/isFavorite?id=";
		var id = <%== j @club.id.to_s%>;
		if(favorite){
				base_url = "http://localhost:3000/unfavorite?id=";
				$.get(base_url.concat(id), function(response){
			});
		}
		else{
			base_url = "http://localhost:3000/favorite?id=";
			$.get(base_url.concat(id), function(response){
					console.log(response);
			});
		}
		isFavorite();
	}
	function isFavorite(){
		var base_url = "http://localhost:3000/isFavorite?id=";
		var id = <%== j @club.id.to_s%>;
		$.get(base_url.concat(id), function(response){
		if(response[0])
		{
			
			$('#favorite-span').addClass("glyphicon-star").removeClass("glyphicon-star-empty");
			favorite = true;

		}
		else{
			$('#favorite-span').addClass("glyphicon-star-empty").removeClass("glyphicon-star");

			favorite =false;
			
		}
		});
	}
	
</script>